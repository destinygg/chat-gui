@use '../../abstracts/' as a;

@use 'death';
@use 'whisper';

.msg-user {
  .features {
    display: inline-flex;
    vertical-align: text-top;
    align-items: center;
    margin-left: -(a.$gutter-xs);
  }

  .flair {
    cursor: pointer;
    margin-left: a.$gutter-xs;
  }

  .richlink {
    align-items: center;
    align-self: center;
    background-color: oklch(76.705% 0.15087 228.94 / 0.212);
    border-radius: calc(infinity * 1px);
    cursor: pointer;
    height: 1.2em;
    line-height: 1;
    max-width: 172px;
    overflow: hidden;
    padding: 0.2em;
    top: 0.2em;
    white-space: nowrap;
    display: inline-flex;

    .brand {
      margin: 1px 2px 1px 0px;
      width: 1em;
      height: 1em;
      border-radius: calc(infinity * 1px);
      background-repeat: no-repeat;
      background-size: 20px 20px;
      background-position: center center;
    }
    .brand.youtube {
      background-image: url('../img/yt.svg');
    }
    .brand.x {
      background-image: url('../img/x.svg');
    }
    .brand.reddit {
      background-image: url('../img/reddit.svg');
    }
    .brand.tiktok {
      background-image: url('../img/tt.svg');
    }

    .title {
      display: inline-block;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      text-align: center;
      margin-right: 2px;
      max-width: calc(172px - 2em);
    }
  }

  .richlink:hover {
    background-color: oklch(59.984% 0.14125 241.578 / 0.2);
  }
  .richlink:visited {
    background-color: oklch(64.348% 0.18159 304.08 / 0.2);
  }
}

.watching-focus:not(.focus) {
  .msg-user {
    opacity: 0.3;

    &.watching-same,
    &.msg-highlight {
      opacity: 1;
    }
  }
}

.pref-hideflairicons .features {
  display: none;
}

.onstreamchat {
  .msg-user {
    @include a.slide-in;
  }

  .features {
    display: none !important;
  }
}
